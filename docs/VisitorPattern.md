# Visitor Pattern
访问者模式，表示一个作用于其对象结构中的各元素的操作，它使你可以在不改变各元素类的前提下定义作用于这些元素的新操作。
稳定的数据结构和易变的操作耦合问题。就是把数据结构和作用于结构上的操作解耦合，使得操作集合可相对自由地演化。

## 角色

- 抽象访问者接口(Visitor):

它定义了对每一个元素（Element）访问的行为，它的参数就是可以访问的元素。它的方法个数理论上来讲与元素个数（Element的实现类个数）是一样的。
从这点不难看出，访问者模式要求元素类的个数不能改变（不能改变的意思是说，如果元素类的个数经常改变，则说明不适合使用访问者模式）。

- 具体访问者(ConcreteVisitor)

具体的访问类，它需要给出对每一个元素类访问时所产生的具体行为。

- 抽象节点(Element)

它定义了一个接受访问者（accept）的方法，其意义是指，每一个元素都要可以被访问者访问

- 具体节点(ConcreteElement)

它提供接受访问方法的具体实现，而这个具体的实现，通常情况下是使用访问者提供的访问该元素类的方法。

- 结构对象(ObjectStructure)

这个便是定义当中所提到的对象结构，对象结构是一个抽象表述，具体点可以理解为一个具有容器性质或者复合对象特性的类。
它会含有一组元素（Element），并且可以迭代这些元素，供访问者访问。

## 场景

- 数据结构稳定，作用于数据结构的操作经常变化的时候。

- 当一个数据结构中，一些元素类需要负责与其不相关的操作的时候，为了将这些操作分离出去，以减少这些元素类的职责时，可以使用访问者模式。

- 有时在对数据结构上的元素进行操作的时候，需要区分具体的类型，这时使用访问者模式可以针对不同的类型，在访问者类中定义不同的操作，从而去除掉类型判断。

6、总结 
## 应用

## 优缺点

### 优点

- 扩展性好：能够在不修改对象结构中的元素的情况下，为对象结构中的元素添加新的功能。
- 复用性好：可以通过访问者来定义整个对象结构通用的功能，从而提高复用程度。
- 分离无关行为：可以通过访问者来分离无关的行为，把相关的行为封装在一起，构成一个访问者，这样每一个访问者的功能都比较单一。

### 缺点

- 对象结构变化很困难：不适用于对象结构中的类经常变化的情况，因为对象结构发生了改变，访问者的接口和访问者的实现都要发生相应的改变，代价太高。
- 破坏封装：访问者模式通常需要对象结构开放内部数据给访问者和ObjectStructure，这破坏了对象的封装性。